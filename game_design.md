# 《星火》游戏设计文档

## 1. 游戏核心玩法和机制

### 1.1 游戏名称
《星火》

### 1.2 游戏类型
文字冒险 + 生存模拟

### 1.3 核心玩法
- **多视角叙事**：玩家将扮演不同身份的角色，体验不同战场和领域的抗战
- **时间线推进**：从1937年七七事变到1945年抗战胜利，按关键时间节点推进
- **资源管理**：管理有限资源（食物、弹药、情报、声望等）
- **选择与后果**：每一个选择都会影响剧情发展和结局
- **暗线系统**：通过不同视角的线索，发现背后的联系

### 1.4 游戏机制

#### 1.4.1 角色系统
- 玩家将扮演4个不同身份的角色：
  - 普通村民（敌后战场）
  - 国军士兵（正面战场）
  - 文化工作者（文化抗战）
  - 商人（经济抗战）

#### 1.4.2 资源系统
- **食物**：维持角色生存
- **弹药**：用于战斗
- **情报**：解锁剧情和任务
- **声望**：影响与其他角色的关系
- **金钱**：用于购买物资

#### 1.4.3 选择系统
- 每个剧情节点提供2-4个选择
- 选择影响角色状态、资源和剧情走向
- 部分选择触发隐藏剧情

#### 1.4.4 结局系统
- **主要结局**：抗战胜利（不同程度）
- **次要结局**：失败（不同原因）
- **特殊结局**：根据选择解锁

## 2. 游戏剧情结构

### 2.1 序章：烽火起（1937年，北平）
- 普通村民视角，见证七七事变
- 体验战争初期的混乱和绝望

### 2.2 第一章：敌后微光（1938-1940年，华北敌后）
- 扮演普通村民王二柱，加入抗日游击队
- 参与地道战、游击战
- 体现人民战争的力量

### 2.3 第二章：正面坚守（1938-1942年，正面战场）
- 扮演国军士兵李明，参与淞沪会战、武汉会战
- 体验正面战场的残酷和顽强抵抗
- 体现正面战场与敌后战场的配合

### 2.4 第三章：文化抗战（1940-1943年，大后方）
- 扮演文化工作者张老师，在大后方进行宣传教育
- 体验文化抗战的重要性
- 体现文化领域的抗战贡献

### 2.5 第四章：经济战线（1941-1944年，沦陷区）
- 扮演商人陈老板，在沦陷区进行秘密经济活动
- 体验经济抗战的艰险
- 体现经济领域的抗战贡献

### 2.6 第五章：黎明前夜（1944-1945年，全国）
- 回归村民视角，见证胜利曙光
- 整合不同视角的线索，理解抗战全貌
- 体验从绝望到胜利的情绪转变

### 2.7 终章：胜利之日（1945年8月，北平）
- 见证日本投降
- 总结抗战胜利的原因

## 3. 游戏场景和角色

### 3.1 主要场景
- 华北农村（敌后战场）
- 正面战场前线（淞沪、武汉等）
- 重庆大后方（文化抗战）
- 上海沦陷区（经济抗战）
- 北平（序章和终章）

### 3.2 主要角色
1. **王二柱**：普通农民→游击队员（敌后视角）
2. **李明**：国军士兵（正面战场视角）
3. **张老师**：文化工作者（文化抗战视角）
4. **陈老板**：商人（经济抗战视角）
5. **次要角色**：游击队队长、国军军官、日本士兵、汉奸等

## 4. 核心主题体现

### 4.1 人民战争和统一战线
- 通过普通村民、士兵、文化工作者、商人的合作，体现全民抗战
- 展示不同阶层、不同党派在抗战中的团结

### 4.2 大东亚共荣的虚伪
- 通过沦陷区的生活，展示日本侵略者的掠夺和压迫
- 揭示大东亚共荣的谎言

### 4.3 敌后战场和正面战场的结合
- 通过暗线系统，展示两个战场的相互配合
- 例如：敌后游击队的情报支持正面战场，正面战场的牵制为敌后创造条件

### 4.4 文化、经济领域的抗战
- 文化工作者通过文字和艺术鼓舞人心
- 商人通过秘密经济活动支持抗战

### 4.5 军国主义对人的异化
- 展示日本士兵从普通人变成战争机器的过程
- 揭示军国主义思想的危害

### 4.6 情绪体验设计
- **绝望**：战争初期的溃败和家园被毁
- **艰难**：资源匮乏、敌人强大的困境
- **曙光**：逐渐找到抗战方法，看到胜利希望
- **胜利**：亲手参与夺取胜利的过程

## 5. 游戏流程

1. 玩家开始游戏，选择初始角色
2. 按照时间线推进剧情，体验不同视角
3. 管理资源，做出选择
4. 解锁不同剧情分支和结局
5. 最终见证抗战胜利，理解胜利原因

## 6. 技术实现

- **前端技术**：HTML5 + CSS3 + JavaScript
- **游戏引擎**：自定义简单引擎，无需复杂框架
- **资源需求**：文字内容、简单插图、背景音乐
- **适配**：支持PC和移动设备

## 7. 游戏特色

- **多视角叙事**：体验不同身份的抗战生活
- **历史真实性**：基于真实历史事件改编
- **深度主题**：探讨抗战胜利的原因和战争的本质
- **简单易上手**：适合不同年龄段的玩家
- **教育意义**：让玩家通过游戏了解抗战历史

## 8. 开发计划

1. **核心玩法实现**：文字冒险系统、资源管理系统
2. **剧情编写**：各章节剧情和分支
3. **UI设计**：游戏界面和交互设计
4. **资源制作**：插图、音效等
5. **测试优化**：游戏测试和体验优化

---

# 游戏核心逻辑设计

## 1. 游戏状态管理

```javascript
// 游戏状态对象
const gameState = {
  currentChapter: 0, // 当前章节
  currentCharacter: 0, // 当前角色
  time: 1937, // 当前时间
  resources: {
    food: 100,
    ammo: 0,
    intelligence: 0,
    reputation: 0,
    money: 500
  },
  characterStatus: {
    health: 100,
    morale: 70,
    fatigue: 0
  },
  flags: {}, // 剧情标志，用于记录已发生的事件
  relationships: {} // 与其他角色的关系
};
```

## 2. 剧情系统

```javascript
// 剧情节点结构
const storyNodes = {
  "node1": {
    text: "七七事变爆发了，日军开始进攻北平。你作为一个普通村民，你决定：",
    choices: [
      {
        text: "留在北平，等待局势稳定",
        consequences: {
          resources: { food: -20 },
          flags: { "stayed_in_beijing": true }
        },
        nextNode: "node2"
      },
      {
        text: "逃离北平，前往农村",
        consequences: {
          resources: { money: -50 },
          flags: { "fled_beijing": true }
        },
        nextNode: "node3"
      }
    ]
  }
  // 更多剧情节点...
};
```

## 3. 多视角切换系统

```javascript
// 角色切换函数
function switchCharacter(characterId) {
  gameState.currentCharacter = characterId;
  // 加载对应角色的剧情和资源
  loadCharacterData(characterId);
  // 更新游戏界面
  updateUI();
}

// 章节推进函数
function advanceChapter() {
  gameState.currentChapter++;
  // 检查是否需要切换角色
  if (shouldSwitchCharacter()) {
    switchCharacter(getNextCharacter());
  }
  // 加载新章节剧情
  loadChapterData(gameState.currentChapter);
}
```

## 4. 结局系统

```javascript
// 结局判断函数
function checkEnding() {
  if (gameState.time >= 1945) {
    // 抗战胜利
    if (gameState.resources.reputation > 80) {
      return "perfect_ending";
    } else if (gameState.resources.reputation > 50) {
      return "good_ending";
    } else {
      return "normal_ending";
    }
  } else if (gameState.characterStatus.health <= 0) {
    // 角色死亡
    return "death_ending";
  } else if (gameState.resources.food <= 0) {
    // 饿死
    return "starvation_ending";
  }
  // 继续游戏
  return null;
}
```

## 5. 资源管理系统

```javascript
// 资源更新函数
function updateResources(change) {
  for (const [resource, amount] of Object.entries(change)) {
    if (gameState.resources[resource] !== undefined) {
      gameState.resources[resource] += amount;
      // 确保资源不低于0
      gameState.resources[resource] = Math.max(0, gameState.resources[resource]);
    }
  }
  // 更新UI
  updateResourceUI();
}

// 日常消耗函数
function dailyConsumption() {
  updateResources({
    food: -5,
    fatigue: +10
  });
  // 检查角色状态
  checkCharacterStatus();
}
```

---

# 游戏UI设计

## 1. 主界面布局

```
+-----------------------------------+
| 游戏标题栏                         |
+-----------------------------------+
| 角色信息 | 资源信息 | 时间信息   |
+-----------------------------------+
|                                   |
|          剧情文本区域              |
|                                   |
+-----------------------------------+
|                                   |
|          选择按钮区域              |
|                                   |
+-----------------------------------+
| 状态栏 | 日志 | 设置               |
+-----------------------------------+
```

## 2. 角色信息面板

- 角色头像和名称
- 生命值、士气、疲劳度
- 当前身份和状态

## 3. 资源信息面板

- 食物、弹药、情报、声望、金钱的数量
- 资源图标和文字描述

## 4. 剧情文本区域

- 显示当前剧情文本
- 支持自动换行和滚动
- 文本显示动画效果

## 5. 选择按钮区域

- 显示当前可用的选择
- 按钮悬停效果
- 点击反馈

## 6. 状态栏

- 显示游戏进度
- 当前章节和时间
- 已解锁的剧情节点

## 7. 日志系统

- 记录游戏中的重要事件
- 可查看历史记录
- 支持搜索和筛选

## 8. 设置面板

- 音效开关和音量调节
- 文字速度调节
- 屏幕亮度调节
- 游戏存档和读档

---

# 游戏资源需求

## 1. 文字内容

- 各章节剧情文本
- 角色对话
- 选择描述
- 结局文本

## 2. 图片资源

- 角色头像（4个主要角色）
- 场景插图（5个主要场景）
- 资源图标（5种资源）
- UI元素（按钮、面板等）

## 3. 音效资源

- 背景音乐（不同场景和情绪）
- 音效（点击、翻页等）
- 环境音（战场、农村等）

## 4. 动画效果

- 文本显示动画
- 角色状态变化动画
- 场景切换动画

---

# 测试计划

1. **功能测试**：测试游戏的各项功能是否正常
2. **剧情测试**：测试剧情分支和结局是否正确
3. **体验测试**：测试游戏体验是否流畅，情绪体验是否符合设计
4. **兼容性测试**：测试在不同设备和浏览器上的表现
5. **历史准确性测试**：确保游戏内容符合历史事实
6. **主题表达测试**：确保游戏主题得到正确表达

---

# 优化计划

1. **性能优化**：优化游戏加载速度和运行流畅度
2. **体验优化**：优化UI设计和交互体验
3. **内容优化**：根据测试反馈调整剧情和游戏机制
4. ** accessibility优化**：支持不同需求的玩家
5. **多语言支持**：添加中文、英文等多语言支持

---

# 发布计划

1. **内部测试**：团队内部测试
2. **封闭测试**：邀请部分玩家测试
3. **公开测试**：发布测试版本，收集玩家反馈
4. **正式发布**：发布正式版本
5. **后续更新**：根据玩家反馈进行更新和扩展